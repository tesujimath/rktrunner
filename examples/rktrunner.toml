rkt = "/usr/bin/rkt"
attach-stdio = true
preserve-cwd = true
exec-slave-dir = "/usr/libexec/rktrunner"
#exec-slave-dir = "/home/guestsi/go/bin"
default-interactive-cmd = "sh"

[environment]
# these are passed in a file, not on the command line
HOME = "/home/{{.Username}}"
http_proxy = "{{.http_proxy}}"
https_proxy = "{{.https_proxy}}"

[options]
general = ["--insecure-options=image"]
fetch = ["--pull-policy=new"]
run = [
    "--net=host",
]
image = [
    "--user={{.Uid}}",
    "--group={{.Gid}}",
    "--seccomp", "mode=retain,@docker/default-whitelist,mbind",  # for Julia, see https://github.com/rkt/rkt/issues/3651
]

[auto-image-prefix]
"biocontainers/" = "docker://biocontainers/"

[volume.home]
volume = "kind=host,source={{.HomeDir}}"
mount = "target=/home/{{.Username}}"

[volume.dataset]
volume = "kind=host,source=/dataset"
mount = "target=/dataset"

[volume.bifo]
volume = "kind=host,source=/bifo"
mount = "target=/bifo"

[volume.volume-config]
volume = "kind=empty,uid={{.Uid}},gid={{.Gid}}"

[volume.volume-data]
volume = "kind=empty,uid={{.Uid}},gid={{.Gid}}"

#
# Aliases - keep alphabetical
#
# By convention, we append an underscore to the aliases for images
# which don't have a default executable.
#

[alias.bbmap_]
image = "quay.io/biocontainers/bbmap:37.02--0"
exec = ["bbmap.sh"]

[alias.blast_]
image = "quay.io/biocontainers/blast:2.6.0--boost1.61_0"
exec = ["blastn","blastp","blastx","tblastn","tblastx"]

[alias.canu_]
image = "quay.io/biocontainers/canu:1.4--1"
exec = ["canu"]

[alias.julia_]
image = "docker://julia"
exec = ["julia"]

[alias.mafft_]
image = "quay.io/biocontainers/mafft:7.305--0"
exec = ["mafft"]

[alias.qiime_]
image = "quay.io/biocontainers/qiime:1.9.1--py27_0"

[alias.ruby_]
image = "docker://ruby"
exec = ["ruby", "irb"]

[alias.spades_]
image = "quay.io/biocontainers/spades:3.10.1--py35_0"

[alias.stacks_]
image = "quay.io/biocontainers/stacks:1.44--0"

[alias.trimmomatic_]
image = "quay.io/biocontainers/trimmomatic:0.36--3"
